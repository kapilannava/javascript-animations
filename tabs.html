<!DOCTYPE html>
<html>
<head>
        <title>Tabs</title>
</head>
<body>
<style>
/*
*Tabs Container Setup
*/
.interactive-dashboard{
    margin: auto;
}

.main-screen{
    text-align: center;
    margin: auto;
    width: 850px;
    border: 1px solid black;
    opacity: 0;
} 

.main-screen-animation-container{
    padding: 5%;
}
.interactive-screens{
    display: flex;
    justify-content: center;
    text-align: center;
    background: #f5f5f5;
    gap: 5%;
}

.interactive-screen{
    width: 200px;
    height: 100px;
    border: solid 1px black;
    background: #ffffff;
    opacity: 0;
    transition: width 0.5s height 0.5s;
}
.tabs{
    display: flex;
    justify-content: center;
    gap: 100px; 
    margin-top: 5%;   
}

.active{
    background-color:#f5f5f5;
}

.main-active{
    background-color: white !important;
}

#tab1, #tab2, #tab3, #tab4{
    transition: width 1s;
}

.active-tab{
    text-decoration: underline;
}

.tab-child{
    cursor: pointer;
}

.tab-child.activeTab{
    text-decoration: underline;
}

@keyframes grow{
    0% {opacity: 0;}
    50% {opacity: 0.5; width: 260px; height: 110px;}
    100% {opacity: 1; width:250px; height: 100px; }
}

@keyframes appear{
    from {opacity: 0;}
    to {opacity: 1;}
}

@keyframes increase{
    from {width: 0;}
    to {width: 100%;}
}

@keyframes increaseLines{
    from {width: 0;}
    to {width: 100%;}
}

/*
* Animations
*/

.blue-bar{
    width: 100%;
    height: 20px;
    background-color: #3F7EEE;
}

.teal-bar{
    width: 80%;
    height: 20px;
    background-color: #4AC0E6;
}

.red-bar{
    width: 110%;
    height: 5px;
    position: relative;
    top: 50%;
    transform: translateY(-50%);
    background-color: #4AD0E6;
}

.lines-container{
    margin: 10%;
    display: grid;
    grid-template-columns: 1fr 1fr;
}

.line{
    width: 100%;
    height: 3px;
    animation-delay: 3s;
    background-color: black;
    margin-bottom: 10%;
}

.plot-line{
    width: 100%;
    height: 3px;
    animation-delay: 3s;
    background-color: black;
}

.dataVisuals{
    display: grid;
    grid-template-columns: 1fr 1fr;
    padding: 5%;
    border-bottom: 3em solid #f5f5f5;
}

.bar-graph-data{
    width: 20%;
    height: 80px;
    background-color: blue;
    margin-right: 5%;
    display: inline-flex;
}
.dataVisuals-col-two{
    display: flex;
    flex-direction: column;
}

.bar-graph-container{
    margin-top: auto;
}

</style>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.4/lottie.min.js"></script>

<div class="hero" style="padding-bottom: 1000px; text-align: center;"><h1>Here's the hero section</h1></div>
<div class="interactive-dashboard">
    <div data-tab-content id="tab1" class="main-screen main-active active">
       <div style="border: 3em solid #f5f5f5;">
            <div class="main-screen-animation-container">
                    <div class="blue-bar">
                            <div class="teal-bar">
                                    <div class="red-bar"></div>
                            </div>
                    </div>
               </div>
       <div class="dataVisuals">
           <div class="dataVisuals-col dataVisuals-col-one">

           <div id="plot-graph"></div>
                    <script>
                            var animation = bodymovin.loadAnimation({
                            // animationData: { /* ... */ },
                            container: document.getElementById('plot-graph'), // required
                            path: 'img/plotLine.json', // required
                            renderer: 'svg', // required
                            loop: false, // optional
                            autoplay: true, // optional
                            name: "Demo Animation", // optional
                          });


                          </script>
<div id="plot-base" class="plot-line"></div>
</div>

<div class="dataVisuals-col dataVisuals-col-two">
    <div class="bar-graph-container">
            <div class="bar-graph-data" style="height: 100px"></div>
            <div class="bar-graph-data" style="height: 200px"></div>
            <div class="bar-graph-data" style="height: 200px"></div>
    </div>

</div>
    </div>

    <div class="interactive-screens">
    
            <div data-tab-content data-delay="0s" id="tab2" class="interactive-screen">
            <div class="lines-container">
                <div>$</div>
                <div>
                        <div style="max-width: 80%" class="line"></div>
                        <div class="line"></div>
                        <div style="max-width: 50%" class="line"></div>
                </div>
            </div>
            </div>
    
            <div data-tab-content data-delay="0.5s" id="tab3" class="interactive-screen">
                    <div class="lines-container">
                            <div>$</div>
                            <div>
                                <div style="max-width: 60%" class="line"></div>
                                <div style="max-width: 30%" class="line"></div>
                                <div style="max-width: 80%" class="line"></div>
                            </div>
                        </div>
                </div>
    
            <div data-tab-content data-delay="1s" id="tab4" class="interactive-screen">
                    <div class="lines-container">
                            <div>$</div>
                            <div>
                                    <div style="max-width: 60%" class="line"></div>
                                    <div style="max-width: 100%" class="line"></div>
                                    <div style="max-width: 80%" class="line"></div>
                                </div>
                        </div>
                </div>
    
        </div>
    </div>
    </div>

<div class="tabs">
    <div data-tab-target="#tab1" class="tab-child tab-one activeTab">Tab 1</div>
    <div data-tab-target="#tab2" class="tab-child tab-two">Tab 2</div>
    <div data-tab-target="#tab3" class="tab-child tab-three">Tab 3</div>
    <div data-tab-target="#tab4" class="tab-child tab-four">Tab 4</div>
</div>
</div>
<script>

const tabChildren = document.querySelectorAll('[data-tab-target]');
const tabContents = document.querySelectorAll('[data-tab-content]');
const mainScreen = document.querySelector('.main-screen');
const interactiveScreens = document.querySelectorAll('.interactive-screen');
const blueBar = document.querySelector('.blue-bar');
const boxLines = document.querySelectorAll('.line');


//Main screen fade in opacity from 0 to 1
mainObserver = new IntersectionObserver((entry)=>{
    if(entry[0].intersectionRatio > 0){
    entry[0].target.style.animation = `appear 1s forwards ease-out`;
    } else {
        entry[0].target.style.animation=  `none`;
    }
})

mainObserver.observe(mainScreen);

//Interactive screen staggered fade-in, keyframes to increase width/height
// and return to initial state
interactiveScreensObserver = new IntersectionObserver((entries) =>{
    entries.forEach((entry) =>{
        console.log(entry.target.style);
        if (entry.intersectionRatio > 0){
        entry.target.style.animation = `grow 1.5s ${entry.target.dataset.delay} forwards ease-out`;
        } else {
            entry.target.style.animation = `none`;
        }
    })
})

interactiveScreens.forEach(interactiveScreen =>{
    interactiveScreensObserver.observe(interactiveScreen);
})

//Blue statistic animation
observerBlueBar = new IntersectionObserver((entry) =>{
    if(entry[0].intersectionRatio > 0){
        entry[0].target.style.animation = `increase 1s forwards ease-out`;
    } else {
        entry[0].target.style.animation = `none`;
    }
})

observerBlueBar.observe(blueBar);


//Line animation
observeLines = new IntersectionObserver((boxLines) => {
boxLines.forEach((boxLine) =>{
    if(boxLine.intersectionRatio > 0){
        boxLine.target.style.animation = `increaseLines 2s forwards ease-out`;
    } else {
        boxLine.target.style.animation = `none`;
    }
})
})

boxLines.forEach(boxLine =>{
    observeLines.observe(boxLine);
})
 
tabChildren.forEach(tabChild => {
    tabChild.addEventListener('click', event =>{
        const target = document.querySelector(tabChild.dataset.tabTarget);
        console.log(target);
        tabContents.forEach(tabContent =>{
            tabContent.classList.remove('active');
        })
        tabChildren.forEach(tabChild =>{
            tabChild.classList.remove('activeTab');
        })
        tabChild.classList.add('activeTab');
        target.classList.add('active');
    })
})



</script>

</body>
</html> 
